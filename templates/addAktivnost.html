{% extends 'base.html' %}

{% block title %}
Upravljanje aktivnostima
{% endblock %}


{% block content %}
<h1>Upravljanje aktivnostima</h1>

<hr>

<form action="{{ url_for('aktivnosti.new_aktivnost') }}" method="POST">
    <h2>Dodaj aktivnost</h2>
    <label>
        Naziv aktivnosti:
        <input type="text" name="name" placeholder="Pecanje" required>
    </label>
    <label>
        Datum održavanja:
        <input type="date" name="due_date" required>
    </label>
    <label>
        Mesto održavanja:
        <input type="text" name="location" placeholder="Velika Plana" required>
    </label>
    <label>
        Tip aktivnosti:
        <select name="type" required>
            <option value="Aktivnost">Aktivnost</option>
            <option value="Tecaj">Tecaj</option>
            <option value="Seminar">Seminar</option>
            <option value="Izlet">Izlet</option>
            <option value="Bivak">Bivak</option>
            <option value="Tabor">Tabor</option>
            <option value="Smotra">Smotra</option>
        </select>
    </label>
    {% if current_user.role == "savez_admin" %}
    <label>
        Tip organizatora:
        <select name="organizer_type" required>
            <option value="Savez">Savez</option>
            <option value="International">International</option>
        </select>
    </label>
    <label>
        Naziv organizatora:
        <input type="text" name="organizer_name" placeholder="PFE" required>
    </label>
    {% else %}
    <label>
        Naziv organizatora:
        <input type="text" name="organizer_name" value="{{current_user.odred.name}}" disabled>
    </label>
    {% endif %}
    <input type="submit" value="Napravi aktivnost" class="btn" />
</form>

<hr>

<form action="{{ url_for('aktivnosti.log_aktivnost') }}" method="POST">
    <h2>Zabeleži učešće</h2>
    <label>
        Username člana:
        <input type="text" name="user" placeholder="aa.12345c" required>
    </label>
    <label>
        Naziv aktivnosti i organizator:
        <select name="activity">
            {% for activity in activities %}
            <option value="{{ activity.id }}">{{ activity.name }} - {{ activity.organizer_name }}</option>
            {% endfor %}
        </select>
    </label>
    <input type="submit" value="Zabeleži učešće" class="btn" />
</form>

<hr>

<form action="{{ url_for('aktivnosti.generateQR') }}" method="POST" style="text-align: center;">
    <label>
        Naziv aktivnosti i organizator:
        <select name="activity">
            {% for activity in activities %}
            <option value="{{ activity.id }}">{{ activity.name }} - {{ activity.organizer_name }}</option>
            {% endfor %}
        </select>
    </label>
    {% if qrimg %}
    <label>
        <img src="{{qrimg}}" class="qrcode_img"><br>
        <a href="{{qrimg}}" download="QRcode.png" ><i>Preuzmi QR kod</i></a>
    </label>
    {% endif %}
    <input type="submit" value="Generiši QR kod" class="btn">
</form>


<hr>

<input type="button" value="Nazad" class="btn" onclick="window.location.href = `{{ url_for('dashboard.dashboard') }}`">
{% endblock %}